@page
@model HRHelper.Pages.Admin.IndexModel
@using System.Reflection
@inject IConfiguration Configuration
@{
	ViewData["Title"] = "Admin";
	var version = Configuration["APP_VERSION"] ?? Assembly.GetEntryAssembly()?.GetName().Version?.ToString() ?? "dev";
}
<p style="font-size:0.85em;color:#555;margin-top:-0.5rem">Version: @version</p>
<p><a href="/admin/create">Create special request</a> | <a href="/admin/templates">Questionnaire templates</a></p>
<h3>Special request links</h3>
<table>
	<thead><tr><th>Title</th><th>Type</th><th>Link</th><th>Expires</th></tr></thead>
	<tbody>
	@foreach (var r in Model.Requests)
	{
		<tr>
			<td>@r.Title</td>
			<td>@r.Type</td>
			<td><a href="@Model.GetLink(r)" target="_blank">@Model.GetLink(r)</a></td>
			<td>@r.ExpiresAt.UtcDateTime.ToString("u")</td>
		</tr>
	}
	</tbody>
</table>
<h3>Completed submissions</h3>
<ul>
	@foreach (var s in Model.Submissions)
	{
		<li>@s.SubmittedAt.UtcDateTime.ToString("u") â€” @s.SpecialRequest?.Title</li>
	}
</ul>
