@page "{slug}"
@model HRHelper.Pages.Requests.EnglishModel
@{
	ViewData["Title"] = Model.Special?.Title ?? "English test";
}
@if (Model.Error != null)
{
	<p style="color:red">@Model.Error</p>
}
@if (Model.Special == null)
{
	<p>Link is not available.</p>
}
else
{
	<p>@Model.Payload.Prompt</p>
	@if (!string.IsNullOrEmpty(Model.Payload.VideoUrl))
	{
		<video src="@Model.Payload.VideoUrl" controls width="640"></video>
	}
	<h4>Record from webcam or upload a video</h4>
	<video id="preview" autoplay muted playsinline width="480"></video><br />
	<button type="button" id="start">Record</button>
	<button type="button" id="stop">Stop</button>
	<form method="post" enctype="multipart/form-data">
		<input type="file" name="Video" id="videoInput" accept="video/*" />
		<button type="submit">Submit</button>
	</form>
	<script src="/js/record.js"></script>
	<script>
		initRecorder(document.getElementById('preview'), document.getElementById('start'), document.getElementById('stop'), document.getElementById('videoInput'));
	</script>
	@if (Model.Success)
	{
		<p>Submitted. Thank you!</p>
	}
}
